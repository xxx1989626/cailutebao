{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="hr-tabs mb-4">
    <a href="{{ url_for('scheduling.schedule_list') }}" 
       class="{% if request.endpoint == 'scheduling.schedule_list' %}active{% endif %}">ğŸ“… æ’ç­è§†å›¾</a>
    
    <a href="{{ url_for('scheduling.post_list') }}" 
       class="{% if request.endpoint == 'scheduling.post_list' %}active{% endif %}">ğŸ› ï¸ å²—ä½è®¾ç½®</a>
    
    <a href="{{ url_for('trip.trip_list') }}">ğŸ’¼ å‡ºå·®è®¾ç½®</a>
    <a href="{{ url_for('leave.leave_list') }}">ğŸ“ è¯·å‡ç®¡ç†</a>
</div>

    <div class="row">
        <div class="col-md-4">
            <div class="card shadow border-0">
                <div class="card-header bg-primary text-white py-3">
                    <h5 class="mb-0"><i class="bi bi-plus-circle me-2"></i>æ–°å¢å²—ä½</h5>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="mb-3">
                            <label class="form-label fw-bold text-secondary">å²—ä½åç§°</label>
                            <input type="text" name="name" class="form-control" placeholder="å¦‚ï¼šç™½ç­ / å¤œç­" required>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <label class="small text-muted">ä¸Šç­</label>
                                <input type="time" name="default_start" class="form-control" value="08:00" title="ä¸Šç­æ—¶é—´">
                            </div>
                            <div class="col">
                                <label class="small text-muted">ä¸‹ç­</label>
                                <input type="time" name="default_end" class="form-control" value="20:00" title="ä¸‹ç­æ—¶é—´">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold text-secondary">æ˜¾ç¤ºé¢œè‰²</label>
                            <div class="d-flex align-items-center gap-3">
                                <input type="color" name="color" class="form-control form-control-color shadow-sm" value="#007bff" style="width: 60px;">
                                <small class="text-muted">æ­¤é¢œè‰²å°†æ˜¾ç¤ºåœ¨æ’ç­æ—¥å†ä¸­</small>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 fw-bold shadow-sm">
                            <i class="bi bi-save me-1"></i> ä¿å­˜å²—ä½
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-8">
            <div class="card shadow border-0">
                <div class="card-header bg-dark text-white py-3">
                    <h5 class="mb-0"><i class="bi bi-list-stars me-2"></i>ç°æœ‰å²—ä½åˆ—è¡¨</h5>
                    <button class="btn btn-outline-secondary btn-sm px-3" onclick="document.getElementById('postImportInput').click()">
                <i class="bi bi-file-earmark-arrow-up"></i> å¯¼å…¥å²—ä½è®¾ç½®
            </button>
            <a href="{{ url_for('scheduling.export_posts') }}" class="btn btn-outline-secondary btn-sm px-3">
                <i class="bi bi-file-earmark-arrow-down"></i> å¯¼å‡ºå²—ä½è®¾ç½®
            </a>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light">
                                <tr class="small text-secondary">
                                    <th class="ps-4" width="120">é¢œè‰²é¢„è§ˆ</th>
                                    <th>å²—ä½åç§°</th>
                                    <th>æ ‡å‡†å·¥æ—¶</th>
                                    <th class="text-center pe-4" width="150">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for post in posts %}
                                <tr>
                                    <td><span class="badge" style="background-color: {{ post.color }};">&nbsp;&nbsp;&nbsp;</span></td>
                                    <td><strong class="text-dark">{{ post.name }}</strong></td>
                                    <td class="text-muted">{{ post.default_start }} - {{ post.default_end }}</td>
                                    <td class="text-center pe-4">
                                        <div class="btn-group btn-group-sm btn-group-custom shadow-sm">
                                            <a href="{{ url_for('scheduling.post_delete', id=post.id) }}" 
                                               class="btn text-danger" 
                                               title="æ°¸ä¹…åˆ é™¤æ­¤å²—ä½"
                                               onclick="return confirm('ç¡®å®šåˆ é™¤ã€{{ post.name }}ã€‘å²—ä½å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼')">
                                                <i class="bi bi-trash"></i> åˆ é™¤å²—ä½
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                                {% else %}
                                <tr>
                                    <td colspan="3" class="text-center py-5 text-muted">
                                        <i class="bi bi-inbox fs-2 d-block mb-2"></i>
                                        æš‚æœªè®¾ç½®ä»»ä½•å²—ä½
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}