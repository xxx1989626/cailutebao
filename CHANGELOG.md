# 更新日志 (Change Log)

所有对本项目的重要变更将记录在此文件中。

## [7.1.8-alpha] - 2026-01-08

### ✨ 新增功能 (Added)
- **床位动态统计看板**：在房间标题处新增 `已占用/总床位` 实时显示（例如：`2/6`），通过自动累加房内资产容量计算得出。
- **宿舍长置顶逻辑**：优化房间内人员列表，宿舍长（Room Leader）现在会自动排列在首位，并配有星标提醒。
- **资产-铺位联动显示**：床类资产标签右侧新增“铺位人员”面板，可直观查看上、下铺的住户姓名及空位状态。

### 🚀 布局与交互优化 (Improved)
- **全屏地图模式**：突破了 `base.html` 中 `.container` 的宽度限制，支持超大宿舍平面图的 100% 宽度显示。
- **自由缩放滚动**：为地图容器增加了 `overflow: auto`，解决了大尺寸底图在小屏幕下显示不全的问题。
- **界面层次感**：优化了资产标签的 `d-flex` 布局，使责任人信息与铺位信息在有限空间内清晰共存。

### 🐞 修复 (Fixed)
- **拖拽坐标偏移问题**：修复了在开启滚动条或父级容器偏移时，管理员移动房间位置出现的“坐标吸死”或“位置错位”现象。
- **排序冒泡干扰**：解决了 `Sortable.js` 拖拽分配功能与房间句柄 `onmousedown` 移动事件的冒泡冲突。

### 🔧 数据库与模型 (Database)
- 强化了资产模型与房间住户的关联查询，通过 `bed_number` 实现人员与具体资产个体的精确绑定。